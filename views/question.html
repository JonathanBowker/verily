{% extends 'layout.html' %}

{% block content %}
<!-- question -->
<div class="page-header question border-true">
    <div class="row">
        <div class="col-sm-9">
        <h2>{{ question.title }}</h2>

                <p class="lead">
                    {{ question.text }}
                </p>
                
                <i class="fa fa-map-marker fa-fw"></i><span class="sr-only">Locality</span>&nbsp;<span id="question-locality">Southampton</span>
                <i class="fa fa-crosshairs fa-fw"></i> <span class="sr-only">Lat Long</span> <a href="geo:50.930,-1.422"><span id="question-target-lat">50.930</span>, <span id="question-target-long">-1.422</span></a>
                <br>
                <i class="fa fa-bullhorn fa-fw"></i>
                {{ question.author }}
                on {{ question.date }}
                <br>
                {% if question.tags %}
                <i class="fa fa-tag fa-fw"></i>
                {% endif %}
                {% for tag in question.tags %}
                    <a href="/tag/{{ tag }}"><span class="label label-primary">{{ tag }}</span></a>
                {% endfor %}
                
            </div>
            <div class="col-xs-12 col-sm-3 action-buttons">
                <div class="row">

                    <!-- button-mark-important -->
                    <div class="col-xs-3 col-sm-12 input-group action-button-ctr">
                        <span class="input-group-btn">
                            <button class="btn btn-default btn-large text-action-button"><i class="fa fa-exclamation"></i> <strong class="hidden-xs">Important</strong></button>   
                        </span>
                        <span class="action-button-count input-group-addon">
                            99
                        </span>
                    </div>
                    <!-- / button-mark-important -->
                    

                    
                    <!-- button-mark-true -->
                    <div class="col-xs-3 col-sm-12 input-group action-button-ctr">
                        <span class="input-group-btn">                                    
                            <button class="btn btn-success btn-large text-action-button" id="question-support"><i class="fa fa-check"></i> <strong class="hidden-xs">Support</strong></button>
                            
                        </span>
                        <span class="input-group-addon action-button-count">
                            777
                        </span>
                    </div>
                    <!-- / button-mark-true -->

                    
                    <!-- button-mark-false -->
                    <div class="col-xs-3 col-sm-12  input-group action-button-ctr">
                        <span class="input-group-btn">                                    
                            <button class="btn btn-danger btn-large text-action-button" id="question-reject"><i class="fa fa-times"></i> <strong class="hidden-xs">Reject</strong></button>
                            
                        </span>
                        <span class="input-group-addon action-button-count">
                            3333
                        </span>
                    </div>
                    <!-- / button-mark-false -->
                            
                </div>
                
                <!-- / action buttons row -->
                                                    
            </div>
            <!-- / action-buttons -->
            
            
            
        </div>
        <!-- / question header row -->
        
        <!-- small buttons -->
        <div class="additional-button-ctr">
            <button class="btn btn-default btn-sm"><i class="fa fa-flag"></i> <strong>Flag</strong></button>
            &lt;Social sharing buttons&gt;
        </div>
        <!-- / small buttons -->
        
        
    </div>
<!-- / question -->

<!-- create evidence -->
{% include 'evidence/create.html' %}
<!-- / create evidence -->



<div class="row question-image-and-map">
    {% if question.targetImage %}
    <div class="col-sm-6">
        <img src="http://www.southampton.ac.uk/images/inline/choose_southampton.jpg" class="img-responsive">
    </div>
    <div class="col-sm-6">
    {% else %}
    <div class="col-sm-12">
    {% endif %}
        <div id="map" class="smallmap" style="height: 300px;"></div>
        <!-- <img src="http://maps.googleapis.com/maps/api/staticmap?center=-15.800513,-47.91378&zoom=11&size=700x400&sensor=false" alt="map" class="img-responsive"> -->
    </div>    
</div>



<div class="row">
    <!-- <button class="btn btn-primary btn-large"><i class="fa fa-reply"></i> <strong>Verify</strong></button> -->
    
    
</div>

<div class="row question-answers">
    {% for answer in question.answers %}
        <div class="col-sm-4">
            {% include 'answerWithinQuestion.html' with answer %}
        </div>   
    {% endfor %}
</div>




<script type="text/javascript">
// Support/Reject handle

// Hidden field of question type.
var questionType = document.getElementById('form-question-type');

// Display of question type
var labelQuestionType = document.getElementById('form-label-question-type');
var questionTypeClassName = labelQuestionType.className;

document.getElementById('question-support').addEventListener('click', function(e) {
    questionType.value = 'support';
    labelQuestionType.innerHTML = 'Support';
    labelQuestionType.className = questionTypeClassName + ' label-success';
    displayForm();
});

document.getElementById('question-reject').addEventListener('click', function(e) {
    questionType.value = 'reject';
    labelQuestionType.innerHTML = 'Reject';
    labelQuestionType.className = questionTypeClassName + ' label-danger';
    displayForm();
});

function displayForm() {
    // Display the form.
    var formCtr = document.getElementById('form-ctr')
    formCtr.style.display = 'block';
    var formTitle = document.getElementById('form-title');
    formTitle.focus();
    
    // Update chars left
    displayCharsLeft();
    
    // Scroll the top of the form into view.
    //formCtr.scrollIntoView();
    
}



</script>
<script src="http://openlayers.org/api/OpenLayers.js"></script>
<script type="text/javascript">
var map, layer;
function init(){
    map = new OpenLayers.Map( 'map');
    layer = new OpenLayers.Layer.OSM( "Simple OSM Map");
    map.addLayer(layer);
    map.setCenter(
        new OpenLayers.LonLat(-1.422, 50.930).transform(
            new OpenLayers.Projection("EPSG:4326"),
            map.getProjectionObject()
        ), 12
    ); 
    
    // Add Vector marker
    var vectorLayer = new OpenLayers.Layer.Vector("Overlay");
    var feature = new OpenLayers.Feature.Vector(
     new OpenLayers.Geometry.Point(-71.147, 42.472),
     {some:'data'},
     {externalGraphic: 'img/marker.png', graphicHeight: 21, graphicWidth: 16});
    vectorLayer.addFeatures(feature);
    map.addLayer(vectorLayer);
};
init();
</script>

{% endblock %}
