{% extends '../layout.html' %}

{% block content %}
    <div class="row">
        <div class="col-sm-3">
            <div id="map" class="smallmap" style="height: 300px;"></div>
        </div>
        <div class="col-sm-9">
            <div class="col-sm-10">
                <div style="height: 250px;">
                    <h2>{{ crisis.post.title }} <br/><small>by {{ crisis.post.author }}</small></h2>

                    <p class="lead text-center">
                     	{{ crisis.post.text }}
                    </p>
                </div>
                <a class="btn btn-primary" href="/crisis/{{ crisis.id }}/question/create">Ask a question</a>
                <!-- small buttons -->
                <div class="btn-group btn-group-left-margin">
                    <button class="btn btn-default btn-sm"><i class="fa fa-share"></i> <strong>Share</strong></button>
                    <button class="btn btn-default btn-sm"><i class="fa fa-flag"></i> <strong>Flag</strong></button>
                </div>
                <div class="btn-group btn-group-left-margin">
                    <a class="btn btn-default btn-sm"><i class="fa fa-edit"></i> <strong>Edit</strong></a>
                    <a class="btn btn-default btn-sm"><i class="fa fa-list-alt"></i> <strong>History</strong></a>
                </div>
            </div>
            <div class="col-sm-2 text-center">
                <a class="btn btn-default" style="padding:5px 20px 5px 20px" title="Mark as important"><i class="fa fa-exclamation"></i> 2</a>
                <div class="text-muted item-top-margin" title="People who saw it"><i class="fa fa-eye"></i> 36</div>
                <div class="text-muted item-top-margin" title="Questions asked"><i class="fa fa-tasks"></i> 10</div>
                <div class="text-muted item-top-margin" title="Date created"><i class="fa fa-clock-o"></i> 6 days ago</div>
            </div>
        </div>
    </div>



<div class="row">
    <div class="pull-right">
        <label for="select_filter_questions">View questions:</label>
        <select id="select_filter_questions">
            <option>Active (most active first)</option>
            <option>Active (most recent first)</option>
        </select>

    </div>
    
</div>

<div class="row question-answers">
    {% for question in questions | reverse %}
        <div class="col-sm-4" style="max-height:350px">
            {% include 'questionWithinCrisis.html' with question %}
        </div>   
    {% endfor %}
</div>



<script src="http://openlayers.org/api/OpenLayers.js"></script>
<script type="text/javascript">
var map, layer;
function init(){
    map = new OpenLayers.Map('map');
    layer = new OpenLayers.Layer.OSM( "Simple OSM Map");
    map.addLayer(layer);
    map.setCenter(
        new OpenLayers.LonLat(-1.422, 50.930).transform(
            new OpenLayers.Projection("EPSG:4326"),
            map.getProjectionObject()
        ), 12
    ); 
    
    // Add Vector marker
    var vectorLayer = new OpenLayers.Layer.Vector("Overlay");
    var feature = new OpenLayers.Feature.Vector(
     new OpenLayers.Geometry.Point(-71.147, 42.472),
     {some:'data'},
     {externalGraphic: 'img/marker.png', graphicHeight: 21, graphicWidth: 16});
    vectorLayer.addFeatures(feature);
    map.addLayer(vectorLayer);
};
init();
</script>

{% endblock %}